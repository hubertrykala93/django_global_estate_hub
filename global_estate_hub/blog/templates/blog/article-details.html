{% extends 'core/base.html' %}
{% load honeypot %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<section class="blog">
    <div class="container">
        <div class="row blog__row blog-details__row">
            <div class="article__column">
                <article class="article">
                    <div class="article__full-image">
                        <img src="{{ article.image.url }}" alt="article image">
                    </div>

                    <div class="article__meta">
                        <div class="article__meta__author">
                            <img class="article__meta__author__image" src="{{ article.user.image.url }}"
                                 alt="author avatar">
                            <span class="article__meta__author__by">
                                By
                                <a href="#">{{ article.user.username }}</a>
                            </span>
                        </div>
                        <div class="article__meta__date">
                            {{ article.date_posted }}
                        </div>
                    </div>

                    <h2 class="article__title h2">{{ article.title }}</h2>

                    <div class="article__body">
                        <p>
                            Lorem ipsum dolor sit amet consectetur, adipiscing elit sed do eiusmod tempor incididunt, ut
                            labore corpori
                            magna aliqua. Ut enim ad minim veniam quis nostrud exercitation ullamco laboris nisi ut
                            aliquip ex occaecat
                            commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum
                            dolore eu fugiat to
                            pariatur. Excepteur sint occaecat cupidatat non proident sunt in culpa qui officia deserunt
                            mollit anim id.
                        </p>

                        <p>
                            Sed ut perspiciatis unde omnis iste natus, error sit voluptatem accusantium, doloremque
                            laudantium eaque
                            rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae
                            dicta sunt veritatis
                            Nemo enim ipsam voluptatem, quia voluptas sit aspernatur aut odit aut fugit, sed quia
                            consequuntur magni
                            dolores eos qui, ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem
                            ipsum nostrum
                            sit amet, consectetur, adipisci velit, sed quia non numquam eius modi, tempora incidunt ut
                            labore et dolore
                            magnam aliquam quaerat voluptatem.
                        </p>

                        <div class="images__grid">
                            <div class="images__grid__img-wrapper">
                                <img src="/media/article_images/pexels-max-rahubovskiy-6284229.jpg"
                                     alt="article image 1">
                            </div>

                            <div class="images__grid__img-wrapper">
                                <img src="/media/article_images/pexels-designecologist-1046639.jpg"
                                     alt="article image 2">
                            </div>
                        </div>

                        <h3 class="h2">Buying A Home In The Perfect Neighborhood</h3>

                        <p>
                            At vero eos et accusamus et, iusto odio dignissimos ducimus qui blanditiis praesentium
                            voluptatum deleniti
                            atque corrupti quos dolores et, quas molestias excepturi sint occaecati cupiditate non
                            provident asperiores
                            sunt in culpa qui, officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum
                            quidem doloribus
                            facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio
                            cumque occaecat
                            impedit quo minus id quod maxime placeat facere possimus omnis, voluptas assumenda est omnis
                            dolor to
                            repellendus. Temporibus autem quibusdam et aut officiis.
                        </p>

                        <div class="quote">
                            <div class="quote__image">
                                <img src="{{ article.user.image.url }}" alt="">
                            </div>

                            <div class="quote__content">
                                <h5>Andrew Russel </h5>
                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
                                    eiusmod tempor incididunt ut labore et dolore magna.</p>
                            </div>
                        </div>

                        <p>
                            But I must explain to you how all this mistaken idea of denouncing pleasure and praising
                            pain was born and
                            I will give you a complete account of the system and expound the actual teachings of the
                            great explorer of
                            the truth, the master-builder of human happiness. No one rejects dislikes or avoids pleasure
                            itself because
                            it is pleasure, but because those who do not know how to pursue pleasure rationally
                            encounter consequen
                            that are extremely painful. Nor again is there anyone who loves, or pursues or desires to
                            obtain pain of self
                            because it is pain, but because occasionally circumstances
                        </p>
                    </div>

                    <div class="article__footer">
                        <div class="article__footer__tags">
                            {% if article_tags|length > 0 %}
                            <span>Tags:</span>

                            <ul class="article__footer__tags__list">
                                {% for tag in article_tags %}
                                <li>
                                    <a href="{{ tag.get_absolute_url }}">{{ tag }}</a>
                                </li>
                                {% endfor %}
                            </ul>
                            {% endif %}
                        </div>

                        <ul class="article__footer__social-share">
                            <li>
                                <a href="#">
                                    <i class="ri-facebook-fill" aria-hidden="true"></i>
                                    <span class="visually-hidden">Share on facebook link</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <i class="ri-twitter-fill" aria-hidden="true"></i>
                                    <span class="visually-hidden">Share on twitter link</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <i class="ri-google-fill" aria-hidden="true"></i>
                                    <span class="visually-hidden">Share on google link</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <i class="ri-linkedin-fill" aria-hidden="true"></i>
                                    <span class="visually-hidden">Share on linkedin link</span>
                                </a>
                            </li>
                        </ul>
                    </div>

                    <div class="article__navigation">
                        <div class="article__navigation__button article__navigation__button--left">
                            {% if previous_article %}
                            <a href="{{ previous_article.get_absolute_url }}" aria-label="previous article">
                                <i class="ri-arrow-left-line" aria-hidden="true"></i>
                                Previous
                            </a>
                            {% endif %}
                        </div>

                        <div class="article__navigation__button article__navigation__button--right">
                            {% if next_article %}
                            <a href="{{ next_article.get_absolute_url }}" aria-label="next article">
                                Next
                                <i class="ri-arrow-right-line" aria-hidden="true"></i>
                            </a>
                            {% endif %}
                        </div>
                    </div>

                    <div class="article__comments" data-article-comments>
                        <div class="article__comments__count">
                            {% if active_comments.count == 0 %}{{ active_comments.count }} Comments available{% elif active_comments.count == 1 %}{{ active_comments.count }} Comment available{% else %}{{ active_comments.count }} Comments available{% endif %}
                        </div>

                        {% if comments %}
                        <div class="article__comments__wrapper">
                            {% for comment in comments %}
                            {% if comment.active %}
                            <!-- 1 gÅ‚owny komentarz -->
                            <div class="article__comment" data-comment-id="{{ comment.id }}" data-article-comment>
                                <div class="article__comment__body" data-article-comment-body>
                                    <div class="article__comment__avatar">
                                        <img src="{% if comment.user.username %}{{ comment.user.image.url }}{% else %}/media/default_profile_image.jpg{% endif %}" alt="comment author's avatar">
                                    </div>

                                    <div class="article__comment__content">
                                        <div class="article__comment__name">
                                            {% if comment.user.username %}
                                            {{ comment.user.username }}
                                            {% else %}
                                            {{ comment.full_name }}
                                            {% endif %}
                                        </div>

                                        <div class="article__comment__content__body" data-comment-content-body>
                                            {{ comment.comment }}
                                        </div>

                                        <div class="article__comment__foter">
                                            <div class="article__comment__date">{{ comment.date_posted }}</div>
                                            <div class="article__comment__controls">

                                                {% if request.user == comment.user %}
                                                <button data-comment-edit-btn class="article__comment__btn article__comment__btn--edit" aria-label="Edit comment">
                                                    <i class="ri-message-2-line" aria-hidden="true"></i>
                                                    Edit
                                                </button>

                                                <button data-comment-delete-btn class="article__comment__btn article__comment__btn--delete" aria-label="Delete comment">
                                                    <i class="ri-chat-delete-line" aria-hidden="true"></i>
                                                    Delete
                                                </button>
                                                {% endif %}

                                                <button data-comment-reply-btn class="article__comment__btn article__comment__btn--reply" aria-label="Reply to comment">
                                                    <i class="ri-reply-line" aria-hidden="true"></i>
                                                    Reply
                                                </button>

                                            </div>
                                        </div>
                                    </div>

                                    {% if user.is_authenticated %}
                                    <div class="article__comment__rating">
                                        <div class="article__comment__rating__wrapper article__comment__rating__like-wrapper" data-comment-rating-wrapper>
                                            <button class="article__comment__rating__btn" data-comment-like-btn>
                                                <i class="{% if request.user == like.user and comment.comment == like.comment %}ri-thumb-up-fill{% else %}ri-thumb-up-line{% endif %}" aria-hidden="true"></i>
                                                <span class="visually-hidden">Like comment</span>
                                            </button>

                                            <span class="article__comment__rating__counter" data-comment-likes-counter>{{ comment.likes }}</span>
                                        </div>

                                        <div class="article__comment__rating__wrapper article__comment__rating__dislike-wrapper" data-comment-rating-wrapper>
                                            <button class="article__comment__rating__btn" data-comment-dislike-btn>
                                                <i class="{% if comment.dislikes > 0 %}ri-thumb-down-fill{% else %}ri-thumb-down-line{% endif %}" aria-hidden="true"></i>
                                                <span class="visually-hidden">Disike comment</span>
                                            </button>

                                            <span class="article__comment__rating__counter" data-comment-dislikes-counter>{{ comment.dislikes }}</span>
                                        </div>
                                    </div>
                                    {% endif %}
                                </div>

                                <!-- 2 level -->
                                <div class="article__comment" data-comment-id="{{ comment.id }}" data-article-comment>
                                    <div class="article__comment__body" data-article-comment-body>
                                        <div class="article__comment__avatar">
                                            <img src="{% if comment.user.username %}{{ comment.user.image.url }}{% else %}/media/default_profile_image.jpg{% endif %}" alt="comment author's avatar">
                                        </div>
    
                                        <div class="article__comment__content">
                                            <div class="article__comment__name">
                                                {% if comment.user.username %}
                                                {{ comment.user.username }}
                                                {% else %}
                                                {{ comment.full_name }}
                                                {% endif %}
                                            </div>
    
                                            <div class="article__comment__content__body" data-comment-content-body>
                                                {{ comment.comment }}
                                            </div>
    
                                            <div class="article__comment__foter">
                                                <div class="article__comment__date">{{ comment.date_posted }}</div>
                                                <div class="article__comment__controls">
    
                                                    {% if request.user == comment.user %}
                                                    <button data-comment-edit-btn class="article__comment__btn article__comment__btn--edit" aria-label="Edit comment">
                                                        <i class="ri-message-2-line" aria-hidden="true"></i>
                                                        Edit
                                                    </button>
    
                                                    <button data-comment-delete-btn class="article__comment__btn article__comment__btn--delete" aria-label="Delete comment">
                                                        <i class="ri-chat-delete-line" aria-hidden="true"></i>
                                                        Delete
                                                    </button>
                                                    {% endif %}
    
                                                    <button data-comment-reply-btn class="article__comment__btn article__comment__btn--reply" aria-label="Reply to comment">
                                                        <i class="ri-reply-line" aria-hidden="true"></i>
                                                        Reply
                                                    </button>
    
                                                </div>
                                            </div>
                                        </div>
    
                                        {% if user.is_authenticated %}
                                        <div class="article__comment__rating">
                                            <div class="article__comment__rating__wrapper article__comment__rating__like-wrapper" data-comment-rating-wrapper>
                                                <button class="article__comment__rating__btn" data-comment-like-btn>
                                                    <i class="{% if request.user == like.user and comment.comment == like.comment %}ri-thumb-up-fill{% else %}ri-thumb-up-line{% endif %}" aria-hidden="true"></i>
                                                    <span class="visually-hidden">Like comment</span>
                                                </button>
    
                                                <span class="article__comment__rating__counter" data-comment-likes-counter>{{ comment.likes }}</span>
                                            </div>
    
                                            <div class="article__comment__rating__wrapper article__comment__rating__dislike-wrapper" data-comment-rating-wrapper>
                                                <button class="article__comment__rating__btn" data-comment-dislike-btn>
                                                    <i class="{% if comment.dislikes > 0 %}ri-thumb-down-fill{% else %}ri-thumb-down-line{% endif %}" aria-hidden="true"></i>
                                                    <span class="visually-hidden">Disike comment</span>
                                                </button>
    
                                                <span class="article__comment__rating__counter" data-comment-dislikes-counter>{{ comment.dislikes }}</span>
                                            </div>
                                        </div>
                                        {% endif %}
                                    </div>

                                    <!-- 3 level -->
                                    <div class="article__comment" data-comment-id="{{ comment.id }}" data-article-comment>
                                        <div class="article__comment__body" data-article-comment-body>
                                            <div class="article__comment__avatar">
                                                <img src="{% if comment.user.username %}{{ comment.user.image.url }}{% else %}/media/default_profile_image.jpg{% endif %}" alt="comment author's avatar">
                                            </div>
        
                                            <div class="article__comment__content">
                                                <div class="article__comment__name">
                                                    {% if comment.user.username %}
                                                    {{ comment.user.username }}
                                                    {% else %}
                                                    {{ comment.full_name }}
                                                    {% endif %}
                                                </div>
        
                                                <div class="article__comment__content__body" data-comment-content-body>
                                                    {{ comment.comment }}
                                                </div>
        
                                                <div class="article__comment__foter">
                                                    <div class="article__comment__date">{{ comment.date_posted }}</div>
                                                    <div class="article__comment__controls">
        
                                                        {% if request.user == comment.user %}
                                                        <button data-comment-edit-btn class="article__comment__btn article__comment__btn--edit" aria-label="Edit comment">
                                                            <i class="ri-message-2-line" aria-hidden="true"></i>
                                                            Edit
                                                        </button>
        
                                                        <button data-comment-delete-btn class="article__comment__btn article__comment__btn--delete" aria-label="Delete comment">
                                                            <i class="ri-chat-delete-line" aria-hidden="true"></i>
                                                            Delete
                                                        </button>
                                                        {% endif %}
        
                                                        <button data-comment-reply-btn class="article__comment__btn article__comment__btn--reply" aria-label="Reply to comment">
                                                            <i class="ri-reply-line" aria-hidden="true"></i>
                                                            Reply
                                                        </button>
        
                                                    </div>
                                                </div>
                                            </div>
        
                                            {% if user.is_authenticated %}
                                            <div class="article__comment__rating">
                                                <div class="article__comment__rating__wrapper article__comment__rating__like-wrapper" data-comment-rating-wrapper>
                                                    <button class="article__comment__rating__btn" data-comment-like-btn>
                                                        <i class="{% if request.user == like.user and comment.comment == like.comment %}ri-thumb-up-fill{% else %}ri-thumb-up-line{% endif %}" aria-hidden="true"></i>
                                                        <span class="visually-hidden">Like comment</span>
                                                    </button>
        
                                                    <span class="article__comment__rating__counter" data-comment-likes-counter>{{ comment.likes }}</span>
                                                </div>
        
                                                <div class="article__comment__rating__wrapper article__comment__rating__dislike-wrapper" data-comment-rating-wrapper>
                                                    <button class="article__comment__rating__btn" data-comment-dislike-btn>
                                                        <i class="{% if comment.dislikes > 0 %}ri-thumb-down-fill{% else %}ri-thumb-down-line{% endif %}" aria-hidden="true"></i>
                                                        <span class="visually-hidden">Disike comment</span>
                                                    </button>
        
                                                    <span class="article__comment__rating__counter" data-comment-dislikes-counter>{{ comment.dislikes }}</span>
                                                </div>
                                            </div>
                                            {% endif %}
                                        </div>

                                        <!-- 4 level -->
                                        <div class="article__comment" data-comment-id="{{ comment.id }}" data-article-comment>
                                            <div class="article__comment__body" data-article-comment-body>
                                                <div class="article__comment__avatar">
                                                    <img src="{% if comment.user.username %}{{ comment.user.image.url }}{% else %}/media/default_profile_image.jpg{% endif %}" alt="comment author's avatar">
                                                </div>
            
                                                <div class="article__comment__content">
                                                    <div class="article__comment__name">
                                                        {% if comment.user.username %}
                                                        {{ comment.user.username }}
                                                        {% else %}
                                                        {{ comment.full_name }}
                                                        {% endif %}
                                                    </div>
            
                                                    <div class="article__comment__content__body" data-comment-content-body>
                                                        {{ comment.comment }}
                                                    </div>
            
                                                    <div class="article__comment__foter">
                                                        <div class="article__comment__date">{{ comment.date_posted }}</div>
                                                        <div class="article__comment__controls">
            
                                                            {% if request.user == comment.user %}
                                                            <button data-comment-edit-btn class="article__comment__btn article__comment__btn--edit" aria-label="Edit comment">
                                                                <i class="ri-message-2-line" aria-hidden="true"></i>
                                                                Edit
                                                            </button>
            
                                                            <button data-comment-delete-btn class="article__comment__btn article__comment__btn--delete" aria-label="Delete comment">
                                                                <i class="ri-chat-delete-line" aria-hidden="true"></i>
                                                                Delete
                                                            </button>
                                                            {% endif %}
            
                                                            <button data-comment-reply-btn class="article__comment__btn article__comment__btn--reply" aria-label="Reply to comment">
                                                                <i class="ri-reply-line" aria-hidden="true"></i>
                                                                Reply
                                                            </button>
            
                                                        </div>
                                                    </div>
                                                </div>
            
                                                {% if user.is_authenticated %}
                                                <div class="article__comment__rating">
                                                    <div class="article__comment__rating__wrapper article__comment__rating__like-wrapper" data-comment-rating-wrapper>
                                                        <button class="article__comment__rating__btn" data-comment-like-btn>
                                                            <i class="{% if request.user == like.user and comment.comment == like.comment %}ri-thumb-up-fill{% else %}ri-thumb-up-line{% endif %}" aria-hidden="true"></i>
                                                            <span class="visually-hidden">Like comment</span>
                                                        </button>
            
                                                        <span class="article__comment__rating__counter" data-comment-likes-counter>{{ comment.likes }}</span>
                                                    </div>
            
                                                    <div class="article__comment__rating__wrapper article__comment__rating__dislike-wrapper" data-comment-rating-wrapper>
                                                        <button class="article__comment__rating__btn" data-comment-dislike-btn>
                                                            <i class="{% if comment.dislikes > 0 %}ri-thumb-down-fill{% else %}ri-thumb-down-line{% endif %}" aria-hidden="true"></i>
                                                            <span class="visually-hidden">Disike comment</span>
                                                        </button>
            
                                                        <span class="article__comment__rating__counter" data-comment-dislikes-counter>{{ comment.dislikes }}</span>
                                                    </div>
                                                </div>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="article__comments__form">
                        <div class="article__comments__form__title">Add Your Comment</div>

                        <form data-article-comment-form class="theme-form">
                            <input type="hidden" name="csrftoken" value="{{ csrf_token }}">

                            {% render_honeypot_field 'url' %}

                            <div class="form__row">
                                <div class="form__field">
                                    <div class="form__input-wrap">
                                        <input data-name data-input type="text" value="{% if user.is_authenticated %}{{ user.username }}{% endif %}" placeholder="Name" {% if user.is_authenticated %}disabled{% endif %} {% if user.is_authenticated %}aria-hidden="true"{% endif %}>
                                    </div>
                                </div>
                            </div>

                            <div class="form__row">
                                <div class="form__field">
                                    <div class="form__input-wrap">
                                        <textarea data-comment data-input placeholder="Write your comment here..." aria-label="Write your comment here"></textarea>
                                    </div>
                                </div>
                            </div>

                            <div class="form__row submit-row">
                                <div class="form__field form__submit">
                                    <button class="btn secondary-btn btn--auto-width" type="submit">Make a
                                        comment
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </article>
            </div>

            <div class="sidebar__column">
                {% include 'blog/sidebar.html' %}
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block page_scripts %}
<script>
    const loggedIn = false
</script>
{% endblock %}